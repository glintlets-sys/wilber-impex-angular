<!-- Header Component -->
<app-header></app-header>

<!-- Page Banner -->
<section class="page-banner" style="background-image: url('assets/images/bnr3.jpg');">
    <div class="container">
        <div class="page-banner-content">
            <h1>{{ currentCategoryName }}</h1>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb justify-content-center bg-transparent mb-0">
                    <li class="breadcrumb-item"><a routerLink="/" class="text-white">Home</a></li>
                    <li class="breadcrumb-item"><a routerLink="/stone-solutions" class="text-white">Stone Solutions</a></li>
                    <li class="breadcrumb-item active text-white" aria-current="page">{{ currentCategoryName }}</li>
                </ol>
            </nav>
        </div>
    </div>
</section>

<!-- Products Section -->
<section class="products-section">
    <div class="container">
        <div class="row">
            <!-- Filter Sidebar -->
            <div class="col-lg-3">
                <div class="filter-sidebar">
                    <div class="filter-header">
                        <h5 class="filter-title">Categories</h5>
                        <span class="clear-all">Clear All</span>
                    </div>
                    
                    <div class="filter-category" *ngFor="let category of categories">
                        <div class="category-header" 
                             [class.active]="category.active"
                             (click)="onCategoryClick(category.id)"
                             style="cursor: pointer;">
                            <div class="category-title">{{ category.name }}</div>
                            <div class="category-iconn">
                                <i class="fas fa-chevron-right"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Products Grid -->
            <div class="col-lg-9">
                <!-- Loading State -->
                <div *ngIf="loading" class="text-center py-5">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-3">Loading products...</p>
                </div>

                <!-- Products Content -->
                <div *ngIf="!loading">
                    <!-- Sort & Filter Options for Desktop -->
                    <div class="d-none d-lg-flex justify-content-between align-items-center mb-4">
                        <div class="product-count">
                            {{ currentCategoryName }} ({{ products.length }} products)
                        </div>
                        <div class="d-flex align-items-center">
                            <label for="sortOptions" class="me-2 mb-0">Sort by:</label>
                            <select id="sortOptions" class="form-select form-select-sm" style="width: auto;">
                                <option value="popular">Popularity</option>
                                <option value="newest">Newest First</option>
                                <option value="priceAsc">Price: Low to High</option>
                                <option value="priceDesc">Price: High to Low</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- No Products Message -->
                    <div *ngIf="products.length === 0" class="text-center py-5">
                        <i class="fas fa-box-open fa-3x text-muted mb-3"></i>
                        <h4>No products found</h4>
                        <p class="text-muted">No products available in this category at the moment.</p>
                    </div>
                    
                    <!-- Products Grid -->
                    <div class="row" *ngIf="products.length > 0">
                        <div class="col-lg-4 col-md-6 mb-4" *ngFor="let product of products">
                            <div class="product-card">
                                <a [routerLink]="product.link" class="product-image">
                                    <img [src]="product.image" [alt]="product.name">
                                    <div class="product-badge" *ngIf="product.badge" 
                                         [style.background-color]="product.badge === 'Bestseller' ? 'var(--success)' : 'var(--primary)'">
                                        {{ product.badge }}
                                    </div>
                                </a>
                                <div class="product-content">
                                    <div class="product-rating mb-2">
                                        <i *ngFor="let star of getStars(product.rating)" 
                                           [class]="star === 1 ? 'fas fa-star text-warning' : star === 0.5 ? 'fas fa-star-half-alt text-warning' : 'far fa-star text-warning'"></i>
                                        <span class="ms-1 text-muted">({{ product.rating }})</span>
                                    </div>
                                    <h4 class="product-title">
                                        <a [routerLink]="product.link">{{ product.name }}</a>
                                    </h4>
                                    <p class="product-description">{{ product.description }}</p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="product-size">
                                            <span class="badge bg-light text-dark" *ngFor="let size of product.size">{{ size }}</span>
                                        </div>
                                        <div class="product-actions">
                                            <a href="#" data-bs-toggle="tooltip" data-bs-placement="top" title="Add to Wishlist">
                                                <i class="far fa-heart"></i>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <button class="add-to-cart" 
                                        (click)="addToCart(product)"
                                        [disabled]="isAddToCartDisabled(product)"
                                        [class]="getAddToCartButtonClass(product)">
                                    <i [class]="stockLoading[product.id] ? 'fas fa-spinner fa-spin me-2' : 
                                               addedToCartItems.has(product.id) ? 'fas fa-check me-2' : 
                                               !isInStock[product.id] ? 'fas fa-ban me-2' : 'fas fa-shopping-cart me-2'"></i>
                                    {{ getAddToCartButtonText(product) }}
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pagination -->
                    <nav aria-label="Product pagination" class="mt-4" *ngIf="products.length > 0">
                        <ul class="pagination justify-content-center">
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
                                    <i class="fas fa-chevron-left"></i>
                                </a>
                            </li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#">
                                    <i class="fas fa-chevron-right"></i>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="faq-section">
    <div class="container">
        <div class="section-title">
            <span class="text-center-boostt"><img src="assets/images/faviconlogo.png" alt=""> FAQ</span>
            <h2>Frequently Asked Questions</h2>
        </div>
        
        <div class="accordion" id="faqAccordion">
            <!-- FAQ Item 1 -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingOne">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                        Q1: Which tile adhesive is best for tiles?
                    </button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        A: There's no single "best" tile adhesive for every situation. Tiles come in diverse types, sizes, and materials, each requiring specific adhesive properties for optimal bonding. Rest assured, Wilber has the best tile adhesives for fixing tiles anywhere. Wilber has an extensive range of tile adhesives that are meant for different kinds of tiles, such as vitrified tiles, ceramic tiles, terracotta, and more. Our range of tile adhesives includes Wilber New Construction Adhesive, Wilber Vitofix Adhesive, Wilber Extrofix Adhesive, and more. Wilber Master Fix Adhesive is considered one of the best adhesives in the market.
                    </div>
                </div>
            </div>
            
            <!-- FAQ Item 2 -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingTwo">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        Q2: How long does tile adhesive take to dry?
                    </button>
                </h2>
                <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        A: The drying time for tile adhesive depends on several factors including the type of adhesive, environmental conditions, and tile material. Generally, most tile adhesives take 24-48 hours to fully cure. However, some fast-setting adhesives can dry in as little as 2-4 hours. It's important to follow the manufacturer's instructions and avoid walking on or grouting tiles before the adhesive has fully cured.
                    </div>
                </div>
            </div>
            
            <!-- FAQ Item 3 -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingThree">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                        Q3: Can I use tile adhesive for wall tiles?
                    </button>
                </h2>
                <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        A: Yes, tile adhesive can be used for wall tiles. However, it's important to choose the right type of adhesive for your specific application. For wall tiles, you'll want to use a tile adhesive that's specifically formulated for vertical applications. These adhesives typically have better bonding properties and are less likely to sag or slide during installation.
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer Component -->
<app-footer></app-footer>

<!-- Back to Top Button -->
<div class="back-to-top">
    <i class="fas fa-chevron-up"></i>
</div>
