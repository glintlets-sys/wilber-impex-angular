<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <div class="card shadow">
        <div class="border-0 d-flex flex-wrap justify-content-between align-items-center m-3">
          <h3 class="panel-title mb-0">
            <span class="align-text-top">Admin Users Management</span>
          </h3>
          <span class="pull-right">
            <button type="button" 
                    (click)="openAddUserModal()"
                    class="btn btn-primary btn-with-icon">
              <i class="fas fa-plus me-2"></i>Add Admin User
            </button>
          </span>
        </div>

        <!-- Loading State -->
        <div *ngIf="isLoading" class="text-center py-5">
          <i class="fas fa-spinner fa-spin fa-3x text-muted mb-3"></i>
          <h3>Loading Admin Users...</h3>
        </div>

        <!-- Admin Users Table -->
        <div *ngIf="!isLoading && adminUsers.length > 0">
          <table class="table table-bordered mt-3">
                         <thead>
               <tr>
                 <th>Auth ID</th>
                 <th>Name</th>
                 <th>Username</th>
                 <th>Role</th>
                 <th width="120px">Actions</th>
               </tr>
             </thead>
            <tbody>
                             <tr *ngFor="let user of adminUsers">
                 <td>{{ user.id }}</td>
                 <td>{{ user.firstName || '' }}</td>
                 <td>{{ user.username }}</td>
                                   <td>
                    <span class="badge" [ngClass]="getRoleBadgeClass(user.role)">
                      {{ user.role || 'N/A' }}
                    </span>
                  </td>
                 <td>
                   <div class="btn-group" role="group">
                     <button class="btn btn-sm btn-outline-primary me-1" 
                             (click)="openEditUserModal(user)"
                             title="Edit User Role">
                       <i class="fas fa-edit"></i>
                     </button>
                     <button class="btn btn-sm btn-outline-danger" 
                             (click)="deleteUser(user)"
                             title="Remove Admin Privileges">
                       <i class="fas fa-trash"></i>
                     </button>
                   </div>
                 </td>
               </tr>
            </tbody>
          </table>

          <!-- Pagination Info -->
          <div class="d-flex justify-content-between align-items-center p-3">
            <div class="item_count">
              Total Admin Users: {{ count }}
            </div>
          </div>
        </div>

        <!-- Empty State -->
        <div *ngIf="!isLoading && adminUsers.length === 0" class="text-center py-5">
          <i class="fas fa-users fa-3x text-muted mb-3"></i>
          <h3>No Admin Users Found</h3>
          <p class="text-muted">Start by adding your first admin user.</p>
          <button type="button" 
                  (click)="openAddUserModal()"
                  class="btn btn-primary">
            <i class="fas fa-plus me-2"></i>Add First Admin User
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Add/Edit Admin User Modal -->
<div *ngIf="showAddEditModal" class="modal-overlay">
  <div class="modal-content">
    <app-add-edit-admin-user
      [editUser]="editMode ? selectedUser : null"
      [existingAdminUsers]="adminUsers"
      (closePopup)="closeModal()"
      (saveUser)="onSaveUser()">
    </app-add-edit-admin-user>
  </div>
</div>
