<!-- Header Actions -->
<div class="d-flex flex-wrap justify-content-between align-items-center mb-3">
  <h3 class="panel-title mb-0">
    <span class="align-text-top">Category List</span>
  </h3>
  <span class="pull-right">
    <button type="button" class="btn btn-primary" (click)="refreshCategories()" [disabled]="isLoading">
      <i class="fas fa-sync me-1" [class.fa-spin]="isLoading"></i>Refresh Categories
    </button>
  </span>
</div>

<!-- Loading State -->
<div *ngIf="isLoading" class="row mb-3">
  <div class="col-12">
    <div class="alert alert-primary">
      <i class="fas fa-spinner fa-spin me-2"></i>
      Loading categories from product data...
    </div>
  </div>
</div>

<!-- Search -->
<div class="row mb-3">
  <div class="col-4">
    <input type="text" class="form-control" placeholder="Search category" [(ngModel)]="searchTerm" (keyup)="filterData()">
  </div>

  <div class="col-md-5">
    <span class="item_count">Total: {{ count }} categories (extracted from {{ products.length }} products)</span>
  </div>
</div>

<!-- Categories Table -->
<table class="table table-bordered">
  <thead class="table-light">
    <tr>
      <th>ID</th>
      <th>Image</th>
      <th>Category Name</th>
      <th>Parent Category</th>
      <th>Description</th>
      <th>Product Count</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let category of filteredCategories">
      <td>{{ category.id }}</td>
      <td>
        <img [src]="category.image || 'assets/images/placeholder-product.png'" width="60" height="60" class="img-thumbnail">
      </td>
      <td>{{ category.name }}</td>
      <td>{{ getParentCategory(category) }}</td>
      <td>{{ category.description }}</td>
      <td>
        <span class="badge bg-info text-white">{{ category.productCount }}</span>
      </td>
    </tr>
  </tbody>
</table>

<!-- Empty State -->
<div *ngIf="filteredCategories.length === 0" class="text-center py-5">
  <h3 class="no-record-found">No Record Found.</h3>
</div>

<!-- Pagination -->
<div *ngIf="filteredCategories.length > 0" class="d-flex justify-content-center" style="padding: 15px">
  <div class="item_count">
    Total Items: {{ count }}
  </div>
</div>
