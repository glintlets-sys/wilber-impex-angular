<div class="address-form-container">
  <!-- Title -->
  <div *ngIf="showTitle" class="mb-4">
    <h6 class="mb-3">{{ address ? 'Edit Address' : 'Add New Address' }}</h6>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show" role="alert">
    <i class="fas fa-exclamation-triangle me-2"></i>
    {{ errorMessage }}
    <button type="button" class="btn-close" (click)="errorMessage = ''"></button>
  </div>

  <!-- Validation Errors -->
  <div *ngIf="validationErrors.length > 0" class="alert alert-warning alert-dismissible fade show" role="alert">
    <i class="fas fa-exclamation-triangle me-2"></i>
    <strong>Please fix the following errors:</strong>
    <ul class="mb-0 mt-2">
      <li *ngFor="let error of validationErrors">{{ error }}</li>
    </ul>
    <button type="button" class="btn-close" (click)="validationErrors = []"></button>
  </div>

  <!-- Address Form -->
  <form (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="addressLabel" class="form-label">Address Label</label>
        <select 
          class="form-select" 
          id="addressLabel"
          [(ngModel)]="addressForm.label"
          name="label">
          <option value="home">Home</option>
          <option value="office">Office</option>
          <option value="other">Other</option>
        </select>
      </div>
      <div class="col-md-6 mb-3">
        <label for="fullName" class="form-label">Full Name *</label>
        <div class="input-group">
          <input 
            type="text" 
            class="form-control" 
            id="fullName"
            [(ngModel)]="addressForm.fullName"
            name="fullName"
            required
            placeholder="Enter full name">
          <button 
            type="button" 
            class="btn btn-outline-secondary" 
            (click)="fillUserName()"
            title="Fill from profile">
            <i class="fas fa-user"></i>
          </button>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="mobile" class="form-label">Mobile Number</label>
        <div class="input-group">
          <input 
            type="tel" 
            class="form-control" 
            id="mobile"
            [(ngModel)]="addressForm.mobile"
            name="mobile"
            placeholder="Enter mobile number"
            maxlength="10">
          <button 
            type="button" 
            class="btn btn-outline-secondary" 
            (click)="fillUserMobile()"
            title="Fill from profile">
            <i class="fas fa-mobile-alt"></i>
          </button>
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <label for="addressLine1" class="form-label">Address Line 1 *</label>
        <input 
          type="text" 
          class="form-control" 
          id="addressLine1"
          [(ngModel)]="addressForm.addressLine1"
          name="addressLine1"
          required
          placeholder="Street address, apartment, suite, etc.">
      </div>
    </div>

    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="addressLine2" class="form-label">Address Line 2</label>
        <input 
          type="text" 
          class="form-control" 
          id="addressLine2"
          [(ngModel)]="addressForm.addressLine2"
          name="addressLine2"
          placeholder="Apartment, suite, unit, etc. (optional)">
      </div>
      <div class="col-md-6 mb-3">
        <label for="city" class="form-label">City *</label>
        <input 
          type="text" 
          class="form-control" 
          id="city"
          [(ngModel)]="addressForm.city"
          name="city"
          required
          placeholder="Enter city">
      </div>
    </div>

    <div class="row">
      <div class="col-md-4 mb-3">
        <label for="state" class="form-label">State *</label>
        <input 
          type="text" 
          class="form-control" 
          id="state"
          [(ngModel)]="addressForm.state"
          name="state"
          required
          placeholder="Enter state">
      </div>
      <div class="col-md-4 mb-3">
        <label for="pincode" class="form-label">Pincode *</label>
        <input 
          type="text" 
          class="form-control" 
          id="pincode"
          [(ngModel)]="addressForm.pincode"
          name="pincode"
          required
          placeholder="6-digit pincode"
          maxlength="6"
          pattern="[0-9]{6}">
      </div>
      <div class="col-md-4 mb-3 d-flex align-items-end">
        <div class="form-check">
          <input 
            class="form-check-input" 
            type="checkbox" 
            id="isDefault"
            [(ngModel)]="addressForm.isDefault"
            name="isDefault">
          <label class="form-check-label" for="isDefault">
            Set as default address
          </label>
        </div>
      </div>
    </div>

    <!-- Form Actions -->
    <div class="d-flex gap-2">
      <button 
        type="submit" 
        class="btn"
        [disabled]="loading"
        style="background: var(--gradient-primary); color: white; border: none;">
        <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
        <i *ngIf="!loading" class="fas fa-save me-2"></i>
        {{ loading ? 'Saving...' : submitButtonText }}
      </button>
      
      <button 
        type="button" 
        class="btn btn-outline-secondary"
        (click)="onCancel()"
        [disabled]="loading">
        <i class="fas fa-times me-2"></i>
        Cancel
      </button>
    </div>
  </form>
</div> 