<div class="modal-header">
    <h3 class="panel-title mb-0 p-0">
        <span *ngIf="editCategoryPop"> Edit Category
        </span>
    </h3> &nbsp;
    <span *ngIf="editCategoryPop">
        ({{editCategoryData.name}})
    </span>

    <span *ngIf="editToyPopUp"> Edit Toy </span>
    <span *ngIf="addToyPop"> Add Toy </span>
    <button type="button" class="btn-close btn btn-primary btn-with-icon save-profile" (click)="modal.close()">
    </button>
</div>
<div class="modal-body">
    <div *ngIf="editCategoryData">
        <!-- Category Dropdown -->
        <div class="row">
            <div class="col-md-10">
                <div class="form-group row mb-2">
                    <div class="col-md-4">
                        <label for="superCategorySelect">Select Parent Category:</label>
                    </div>
                    <div class="col-md-6">
                        <select class="form-control" id="superCategorySelect" [(ngModel)]="selectedSuperCategoryId"
                            (change)="onCategoryChange(selectedSuperCategoryId)">
                            <option *ngFor="let category of superCategories" [value]="category.id">{{ category.name }}
                                ({{
                                category.id }})</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-md-10" *ngIf="subCategories.length>0">
                <div class="form-group row mb-2">
                    <div class="col-md-4">
                        <label for="categorySelect">Select Category:</label>
                    </div>
                    <div class="col-md-6">
                        <select class="form-control" id="categorySelect" [(ngModel)]="selectedCategoryId"
                            (change)="onSubCategoryChange(selectedCategoryId)">
                            <option *ngFor="let category of subCategories" [value]="category.id">{{ category.name }} ({{
                                category.id }})
                            </option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-md-10" *ngIf="subSubCategories.length>0">
                <div class="form-group row">
                    <div class="col-md-4">
                        <label for="subCategorySelect">Select Sub Category:</label>
                    </div>
                    <div class="col-md-6">
                        <select class="form-control" id="subCategorySelect" [(ngModel)]="selectedSubCategoryId">
                            <option *ngFor="let category of subSubCategories" [value]="category.id">{{ category.name }}
                                ({{
                                category.id }})
                            </option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <button class="btn btn-sm btn-outline-primary" type="button" (click)="addCategory()">Add
                    Category</button>
            </div>

        </div>

        <br>
        <table class="table table-bordered">
            <thead class="table-light">
                <tr>
                    <th>Category Name</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let category of editCategoryData?.categoryDetails; let i = index">
                    <td>{{category?.name}}</td>
                    <td>
                        <button type="button" class="btn btn-sm btn-danger"
                            (click)="removeCategory(category,i)">Remove</button>
                    </td>
                </tr>

            </tbody>

        </table>
        <div class="text-center" *ngIf="editCategoryData?.categoryDetails?.length==0">
            <h5>There is no category found.</h5>
            <h6 class="text-muted">Please add category.</h6>
        </div>
    </div>


    <div *ngIf="editToyPopUp || addToyPop">
        <section>
            <div class="container">
                <form>
                    <!-- Toy Name -->
                    <div class="col-md-12 mb-2">
                        <div class="form-group row clearfix">
                            <div class="col-md-2">
                                <label for="toyName" class="control-label">Toy Name:</label>
                            </div>
                            <div class="col-sm-6">
                                <input type="text" name="toyName" class="form-control form-control-alternative"
                                    placeholder="Enter Toy Name" [(ngModel)]="toy!.name" />
                            </div>
                        </div>
                    </div>

                    <!-- Toy Code -->
                    <div class="col-md-12 mb-2">
                        <div class="form-group row clearfix">
                            <div class="col-md-2">
                                <label for="toyCode" class="control-label">Toy Code:</label>
                            </div>
                            <div class="col-sm-6">
                                <input type="text" name="toyCode" class="form-control form-control-alternative"
                                    placeholder="Enter Toy Code" [(ngModel)]="toy.code" />
                            </div>
                        </div>
                    </div>

                    <!-- Toy Brand -->
                    <div class="col-md-12 mb-2">
                        <div class="form-group row clearfix">
                            <div class="col-md-2">
                                <label for="toyBrand" class="control-label">Toy Brand:</label>
                            </div>
                            <div class="col-sm-6">
                                <input type="text" name="toyBrand" class="form-control form-control-alternative"
                                    placeholder="Enter Toy Brand" [(ngModel)]="toy.brand" />
                            </div>
                        </div>
                    </div>

                    <!-- Toy Price -->
                    <div class="col-md-12 mb-2">
                        <div class="form-group row clearfix">
                            <div class="col-md-2">
                                <label for="toyPrice" class="control-label">Toy Price:</label>
                            </div>
                            <div class="col-sm-6">
                                <input type="number" name="toyPrice" class="form-control form-control-alternative"
                                    placeholder="Enter Toy Price" [(ngModel)]="toy?.price.amount" />
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 mb-2">
                        <div class="form-group row clearfix">
                            <div class="col-md-2">
                                <label for="discountPercent" class="control-label">Discount Amount:</label>
                            </div>
                            <div class="col-sm-6">
                                <input type="text" name="discountPercent" class="form-control form-control-alternative"
                                    placeholder="Enter discount(%)" [(ngModel)]="toy?.discount.discountPercent" />
                            </div>
                        </div>
                    </div>

                    <!-- Image URL -->
                    <div class="col-md-12 mb-2">
                        <div class="form-group row clearfix">
                            <div class="col-md-2">
                                <label for="imgUrl" class="control-label">Toy Image</label>
                            </div>

                            <div class="col-sm-6">
                                <div *ngFor="let photoLink of toy.photoLinks; let i = index" class="userpic">
                                    <div class="userpic-wrapper" style="background-color: #666666">
                                        <img [src]="photoLink" />
                                        <button class="btn btn-outline-danger" type="button"
                                            (click)="removePhotoLink(i)">X</button>
                                    </div>
                                    <input type="file" id="categoryImageFile" [hidden]="true" />
                                </div>

                                <ng-container *ngIf="selectedFiles.length>0">
                                    <div *ngFor="let photoLink of imgList; let i = index" class="userpic">
                                        <div class="userpic-wrapper" style="background-color: #666666">
                                            <img [src]="photoLink" />
                                            <button class="btn btn-outline-danger" type="button"
                                                (click)="removePhotoLink(i)">X</button>
                                        </div>
                                        <input type="file" id="categoryImageFile" [hidden]="true" />
                                    </div>
                                </ng-container>

                                <div class="userpic" *ngIf="toy.photoLinks?.length==0 && selectedFiles.length==0">
                                    <div class="userpic-wrapper" style="background-color: #666666">
                                        <img [src]="toy.photoLinks" (change)="onFileChange($event)"
                                            (click)="triggerSelectFile(fileInput)" />
                                    </div>
                                    <a class="change-userpic" (change)="onFileChange($event)"
                                        (click)="triggerSelectFile(fileInput)">Add Toy Image
                                    </a>
                                    <input type="file" id="categoryImageFile" #fileInput (click)="fileInput.click()"
                                        [hidden]="true" (change)="onFileChange($event)" />
                                </div>
                            </div>

                            <div class="col-sm-2" *ngIf="toy.photoLinks?.length>0 || selectedFiles.length>0">
                                <input type="file" id="categoryImageFile" #fileInput (click)="fileInput.click()"
                                    [hidden]="true" (change)="onFileChange($event)" />
                                <button class="btn btn-outline-primary" type="button" (change)="onFileChange($event)"
                                    (click)="triggerSelectFile(fileInput)">+</button>
                            </div>
                        </div>
                    </div>


                    <!-- Video links -->
                    <div class="col-md-12 mb-2">
                        <div class="form-group row clearfix">
                            <div class="col-md-2">
                                <label for="toyVideo" class="control-label">Video Links:</label>
                            </div>
                            <div class="col-sm-6">
                                <input type="text" name="toyVideo" class="form-control form-control-alternative"
                                    placeholder="Enter Video Links" [(ngModel)]="toy.videoLinks" />
                                <ng-container *ngIf="video_list?.length>0">
                                    <div *ngFor="let video of video_list; let i = index" class="input-group mb-2">
                                        <iframe [class.thumbnail]="thumbnail" [src]="video.embedLink" width="80%"
                                            height="115" frameborder="0" webkitallowfullscreen mozallowfullscreen
                                            allowfullscreen class="mt-2"></iframe>&nbsp;
                                        <div class="input-group-append mt-2">
                                            <button class="btn btn-outline-danger" type="button"
                                                (click)="removeVideoLink(i)">-</button>
                                        </div>
                                    </div>
                                </ng-container>
                            </div>
                            <div class="col-sm-2">
                                <button class="btn btn-outline-primary" type="button"
                                    (click)="addVideoLink()">+</button>
                            </div>
                        </div>
                    </div>

                    <!-- Product Description -->
                    <div class="col-md-12 mb-2">
                        <div class="form-group row clearfix">
                            <div class="col-md-2">
                                <label for="toyProduct" class="control-label">Product Description:</label>
                            </div>
                            <div class="col-md-8">
                                <table class="table" *ngIf="toy.productDescription.length!=0">
                                    <thead class="table-light">
                                        <tr>
                                            <th>Heading</th>
                                            <th>Text</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let product of toy.productDescription;let i =index">
                                            <td>{{ product.heading }}</td>
                                            <td>{{ product.text }}</td>
                                            <td><button class="btn btn-outline-danger" type="button"
                                                    (click)="removeProductDescription(i)">-</button></td>
                                        </tr>
                                    </tbody>
                                </table>

                                <div class="row">
                                    <div class="col-md-5">
                                        <div class="form-group">
                                            <textarea class="form-control" placeholder="Enter product tile"
                                                [(ngModel)]="newProductHeading"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-md-5">
                                        <div class="form-group">
                                            <textarea class="form-control" placeholder="Enter product description"
                                                [(ngModel)]="newProductText"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <button class="btn btn-primary" (click)="addNewProduct()">+</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Save and Cancel Buttons -->
                    <div class="col-md-12">
                        <div class="form-group row clearfix">
                            <div class="col-md-2"></div>
                            <div class="col-md-4">
                                <button class="btn btn-white cancelbtn" type="button"
                                    (click)="modal.close()">Cancel</button>&nbsp;
                                <button type="button" *ngIf="editToyData == undefined" (click)="saveToy()"
                                    class="btn btn-primary btn-with-icon save-profile globleSVGColorButtonChnage">
                                    <svg style="width: 13px" id="Layer_1" data-name="Layer 1"
                                        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                                        <defs>
                                            <style>
                                                .cls-1 {
                                                    fill: #fff;
                                                }
                                            </style>
                                        </defs>
                                        <path class="cls-1"
                                            d="M77.78,0H11.11A11.1,11.1,0,0,0,0,11.11V88.89A11.1,11.1,0,0,0,11.11,100H88.89A11.1,11.1,0,0,0,100,88.89V22.22ZM50,88.89A16.67,16.67,0,1,1,66.67,72.22,16.68,16.68,0,0,1,50,88.89ZM66.67,33.33H11.11V11.11H66.67Z" />
                                    </svg>&nbsp;Save
                                </button>
                                <button type="button" *ngIf="editToyData"
                                    class="btn btn-primary btn-with-icon save-profile globleSVGColorButtonChnage"
                                    (click)="saveToy()">Update</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </section>
    </div>

</div>